---
caption: API Design Guidelines
includeInBreadcrumbs: true
eleventyNavigation:
  parent: api-design-guidelines
---

# Redocly Styleguide

## Overview

A Redocly CLI styleguide was created to support API Developers/Providers in achieving the standards described in the [UKHSA API Guidelines][1], ensuring consistency, reliability, and security across all APIs developed within or on behalf of UKHSA.

> [!NOTE]
> The documentation path remains `/spectral-rules/` to avoid breaking existing bookmarks and links, even though the content now describes the Redocly styleguide.

## How to use the rules

### Install Redocly CLI

[Redocly CLI][2] provides linting for OpenAPI (v3.1 and v3.0), bundling, and preview docs. Install it as a development dependency:

```sh
npm install @redocly/cli --save-dev
```

### Install the UKHSA styleguide package

Install the UKHSA ruleset from GitHub Packages so it can be referenced by your project.

```sh
npm login --scope=@ukhsa-collaboration --auth-type=legacy --registry=https://npm.pkg.github.com
```

```sh
npm install @ukhsa-collaboration/api-styleguide --save-dev
```

> [!TIP] Authenticating with GitHub Packages
> If you have not used GitHub Packages before, follow the steps in [Installing a GitHub npm package][3]. The simplest local option is to authenticate with a GitHub personal access token using `npm login` as shown above; this adds the required credentials to your `.npmrc`.

### Configure Redocly

Create a `redocly.yaml` in your project that extends the UKHSA styleguide and points at your OpenAPI document:

```yaml
apis:
  default:
    root: ./openapi.yml

extends:
  - recommended
  - ./node_modules/@ukhsa-collaboration/api-styleguide/redocly.yaml
```

The extension automatically loads the UKHSA plugin bundled with the package and brings in the **MUST/SHOULD/MAY** rules described in this section. Keep this configuration file under version control so CI/CD can reuse it.

### Run Redocly lint

Lint your OpenAPI definition using the config above:

```sh
npx redocly lint --config=redocly.yaml --format=github-actions
```

### Review and fix any reported issues

Once the linter has highlighted any issues or errors, review and fix to ensure your OpenAPI definition remains compliant with the UKHSA guidelines.

### Severity overrides

Some OpenAPI definitions produced by platforms like [pygeoapi][6] might struggle to meet every **MUST** requirement. This is often because these issues are outside the consuming team's direct control, as fixes would require upstream contributions or maintaining a fork. To accommodate this, as of version `0.4.0` of the ruleset, a custom rule `override-severity-pygeoapi` has been added to relax the severity of certain rules when an OpenAPI document is identified as being generated by pygeoapi.

See [severity overrides][7] for more information.

### CI/CD Github Actions

The following is a sample Github Actions job which sets up linting as part of your CI/CD pipeline, using the `redocly.yaml` configuration stored in your repository.

<!-- {% raw %} -->

```yaml
...
---
name: API Standards Checks

on:
  pull_request:
    branches: [main, master] # Example only - you would typically use either 'main' or 'master', not both

jobs:
  lint-openapi:
    name: Lint OpenAPI
    runs-on: ubuntu-latest

    permissions:
      contents: read
      issues: read
      checks: write
      pull-requests: write
      packages: read

    steps:
      - name: Checkout code
        uses: actions/checkout@v5

      - uses: actions/setup-node@v6
        with:
          node-version: "22.x"
          registry-url: "https://npm.pkg.github.com"
          scope: "@ukhsa-collaboration"

      - name: Install Redocly CLI and UKHSA styleguide
        run: npm install @redocly/cli @ukhsa-collaboration/api-styleguide
        env:
          NODE_AUTH_TOKEN: ${{ secrets.GITHUB_TOKEN }}

      - name: Lint OpenAPI specifications
        run: |
          npx redocly lint --config=redocly.yaml --format=github-actions
```

<!-- {% endraw %} -->

### Additional Recommended Tooling

| Tool | Description |
| - | - |
| [Redocly CLI][2] | Lint, bundle, and preview OpenAPI definitions locally. |
| [Redocly VS Code Extension][4] | Redocly linting and navigation from inside your IDE. |
| [GitHub Action Example][5] | Reference workflow for running `@redocly/cli` in CI. |

Read the [Redocly CLI documentation][2] for more development workflows.

[1]: ../api-guidelines/index.md
[2]: https://redocly.com/docs/cli/
[3]: https://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-npm-registry#installing-a-package
[4]: https://marketplace.visualstudio.com/items?itemName=Redocly.openapi-vs-code
[5]: https://github.com/Redocly/redocly-cli-action
[6]: https://pygeoapi.io/
[7]: ./severity-overrides.md
